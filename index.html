<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Firebase 연결 테스트</title>
</head>
<body>
    <h1>Firebase 연결 테스트 페이지</h1>
    <h2 id="status">연결 시도 중...</h2>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        const statusDiv = document.getElementById('status');

        const firebaseConfig = {
  apiKey: "AIzaSyBl4mNG0HVKLY159dPjJEuYZTp9_ay_guk",
  authDomain: "my-cbt-app-2cdb9.firebaseapp.com",
  projectId: "my-cbt-app-2cdb9",
  storageBucket: "my-cbt-app-2cdb9.firebasestorage.app",
  messagingSenderId: "1091430877229",
  appId: "1:1091430877229:web:1c4fae4ff852df4e1610a4"
};

        try {
            // Firebase 앱 초기화 시도
            const app = firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();
            statusDiv.textContent = 'Firebase 초기화 성공! 데이터베이스에서 과목 정보를 가져오는 중...';

            // 데이터베이스 읽기 시도
            db.collection('subjects').get()
                .then((snapshot) => {
                    // 성공했을 때
                    statusDiv.textContent = `✅ 연결 성공! ${snapshot.size}개의 과목을 찾았습니다.`;
                    statusDiv.style.color = 'green';
                })
                .catch((error) => {
                    // 읽기 실패했을 때
                    statusDiv.textContent = '❌ 데이터베이스 읽기 실패! (오류: Firestore 보안 규칙을 확인하세요)';
                    statusDiv.style.color = 'red';
                    console.error(error);
                });

        } catch (error) {
            // 초기화 자체가 실패했을 때
            statusDiv.textContent = '❌ Firebase 초기화 실패! (오류: firebaseConfig 정보를 다시 확인해주세요)';
            statusDiv.style.color = 'red';
            console.error(error);
        }
    </script>
</body>
</html>
